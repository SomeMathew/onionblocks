<html>

<head>
    <link rel="stylesheet" href="style.css">
    <script src="/js/chat.js"></script>
    <script src="/js/login.js"></script>
    <script>checkLogin();</script>
</head>

<header>
        <div class="header-flex-container">
            <div id="textbox" >
                <h2 style="font-family: OpenSansBold; text-align: left; padding-right:10px;">OnionBlocks</h2>
            </div>
            <div id="textbox" >
                <ul>
                    <li>
                        <a href="/" href="">Home</a>
                    </li>
                    <li>
                        <a href="about.html">About</a>
                    </li>
                    <li>
                        <a href="login.html">Login</a>
                    </li>
                    <li>
                        <a href="register.html">Register</a>
                    </li>
                </ul>
            </div>
           
        </div>
    </header>

<script>
    function reg() {
        window.captureEvents(Event.SUBMIT);
        window.onsubmit = hit;
    }

    async function hit() {
        event.preventDefault();
        console.log("here");
        //get the message SOMEHOW
        var pls = document.getElementById('username').value;
        try {
            await chat.register(pls);
            console.log(`Registered as '${pls}'`)
            document.getElementById("msgLog").innerHTML = "<h2>Register</h2>Thank you for registering, " + pls + "!";
          //  window.location.assign("index.html");
        } catch (error) {
            // Register error occurred
            console.error("Couldn't register!")
        }
    }

</script>

<body onload="reg();">
    <div class="main-flex-container">

        <div id="msgLog" class="msgLog">
                <h2>Welcome!</h2>
                <h4 style="text-align: center;">Register</h4>
                <div align="center">
                    <form class="login-form">
                        <input type="text" id="username" placeholder="username"  />
                        <br>
                        <input type="password" id="password" placeholder="password" style="background-color:white; color:black; border: 1px solid rgb(169, 169, 169); text-align: left;"/>
                        <br>
                        <input type="password" id="confirmedPassword" placeholder="confirm password" style="background-color:white; color:black; border: 1px solid rgb(169, 169, 169); text-align: left;"/>
                        <br>
                        <button onclick="hit()" style="width:175px;">Register</button>
                        <p class="message">Already registered?
                            <a href="login.html">Login.</a>
                        </p>
                    </form>
                </div>
    

        </div>

        
    </div>

    <footer>OnionBlocks &copy; 2018</footer>
    </div>

</html>