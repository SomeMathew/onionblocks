<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="style/style.css">
    <title>Login</title>
    <script src="/js/chat.js"></script>
    <script src="/js/login.js"></script>
    <script>checkLogin();</script>
</head>

<header>
    <div class="header-flex-container">
        <div id="textbox">
            <h2 style="font-family: OpenSansBold; text-align: left; padding-right:10px;">OnionBlocks</h2>
        </div>
        <div id="textbox">
            <ul>
                <li>
                    <a href="/" href="">Home</a>
                </li>
                <li>
                    <a href="about.html">About</a>
                </li>
                <li>
                    <a href="blocks.html">Blocks</a>
                </li>
                <li>
                    <a href="requests.html">Requests</a>
                </li>
            </ul>
        </div>

    </div>
</header>

<script>
    var pls = null;
    async function hit() {
        event.preventDefault();
        //get the message SOMEHOW
        username = document.getElementById('username').value;
        pw = document.getElementById('password').value;
        if (username == "" | pw == "") {
            alert("Please fill out every field.")
        } else {
            try {
                await chat.login(username, pw);
                console.log(`Signed in as '${username}'`);
                doLogin(username, pw);
                window.location.assign("messages.html");
            } catch (error) {
                // Login error occurred
                console.error("Couldn't sign in!");
                window.alert("Your password or username is incorrect. Try again?");
            }
        }
    }



</script>

<body>
    <div class="main-flex-container">

        <div class="msgLog">
            <h2>Welcome Back!</h2>
            <h4 style="text-align: center;">Login</h4>
            <div align="center">
                <form class="login-form">
                    <input type="text" id="username" placeholder="username" />
                    <br>
                    <input type="password" id="password" placeholder="password" style="background-color:white; color:black; border: 1px solid rgb(169, 169, 169); text-align: left;"
                    />
                    <br>
                    <button onclick="hit()" style="width:175px;">Login</button>
                    <p class="message">Not registered?
                        <a href="register.html">Create an account.</a>
                    </p>
                </form>
            </div>


        </div>



    </div>

    <footer>OnionBlocks &copy; 2018</footer>
    </div>

</html>